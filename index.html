<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HCP Test</title>
    <!-- 引入 Bootstrap 5 (CSS + JS) -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- 引入 Material Icons -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <style>
        /* --- 全域樣式 --- */
        body { background-color: #001964; font-family: "Noto Sans TC", sans-serif; display: flex; justify-content: center; min-height: 100vh; margin: 0; }
        .page-wrapper { width: 100%; max-width: 640px; background-color: #e2f0fa; display: flex; flex-direction: column; min-height: 100vh; position: relative; overflow: hidden; }
        
        /* Loading 遮罩 */
        .loading-overlay {
            position: absolute; top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(255, 255, 255, 0.6);
            backdrop-filter: blur(2px);
            z-index: 9999;
            display: flex; justify-content: center; align-items: center;
        }
        .spinner-custom { width: 3rem; height: 3rem; color: #001964; }

        /* ================= 頂部導航列 (視覺還原重點) ================= */
        .top-nav { 
            display: flex; 
            background-color: #001964; 
            padding-top: 20px; 
            flex-shrink: 0; 
            position: relative;
            z-index: 1;
            padding-bottom: 0;
        }
        
        .nav-btn {
            flex: 1; 
            background: transparent; 
            border: none; 
            color: white; 
            padding: 12px 0;
            font-size: 15px;
            font-weight: 500; 
            cursor: pointer; 
            position: relative; 
            transition: none; 
            border-bottom-left-radius: 10px;
            border-bottom-right-radius: 10px;
        }

        .nav-btn.active { 
            background-color: #e2f0fa; 
            color: #001964; 
            font-weight: bold;
            border-top-left-radius: 10px;
            border-top-right-radius: 10px;
            border-bottom-left-radius: 0;
            border-bottom-right-radius: 0;
            box-shadow: 0 -2px 5px rgba(0,0,0,0.1);
            z-index: 2;
        }

        /* 倒圓角 */
        .nav-btn.active::before {
            content: ''; position: absolute; bottom: 0; left: -10px; width: 10px; height: 10px;
            background: radial-gradient(circle at top left, transparent 10px, #e2f0fa 10.5px);
            z-index: 1;
        }
        .nav-btn.active::after {
            content: ''; position: absolute; bottom: 0; right: -10px; width: 10px; height: 10px;
            background: radial-gradient(circle at top right, transparent 10px, #e2f0fa 10.5px);
            z-index: 1;
        }

        /* 內容區塊 */
        .content-area { padding: 20px; flex: 1; overflow-y: auto; overflow-x: hidden; }
        
        /* 搜尋區塊 */
        .search-box { background: transparent; padding-bottom: 10px; }
        .form-control { 
            border-radius: 5px; border: none; padding: 12px 15px; 
            box-shadow: 0 1px 3px rgba(0,0,0,0.1); font-size: 15px;
        }
        .form-control::placeholder { color: #aaa; }
        
        .btn-primary-custom { 
            background-color: #001964; color: white; width: 100%; border-radius: 30px; 
            padding: 12px; border: none; font-size: 16px; margin-top: 15px;
        }
        .btn-primary-custom:hover { background-color: #002a80; color: white; }
        .btn-primary-custom:disabled { background-color: #8892b5; cursor: not-allowed; }

        /* 子分頁 */
        .sub-tabs { display: flex; border-bottom: 1px solid #cddceb; margin-bottom: 15px; }
        .sub-tab { 
            flex: 1; text-align: center; padding: 12px; cursor: pointer; color: #7b88a8; 
            font-size: 15px; border-bottom: 2px solid transparent; transition: all 0.2s;
        }
        .sub-tab.active { color: #001964; border-bottom: 2px solid #001964; font-weight: bold; }

        /* 卡片 */
        .custom-card { 
            background: white; border-radius: 8px; padding: 15px; margin-bottom: 15px; 
            border: none; box-shadow: 0 2px 5px rgba(0,0,0,0.03); 
        }
        .card-header-custom { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; }
        .title-text { color: #001964; font-weight: bold; font-size: 1.1rem; }
        .info-text { color: #001964; font-size: 0.95rem; margin-bottom: 3px; }
        .sub-info-text { color: #9E9E9E; font-size: 0.85rem; }
        
        /* 進度條 */
        .progress-card {
            background: linear-gradient(135deg, #4aa3e8 0%, #3b97de 100%);
            color: white; padding: 15px 20px; border-radius: 12px; margin-bottom: 20px;
            box-shadow: 0 4px 6px rgba(59, 151, 222, 0.2);
        }
        .progress-hr { border-top: 1px solid rgba(255,255,255,0.4); margin: 10px 0; }

        /* 按鈕群 */
        .icon-btn { background: none; border: none; cursor: pointer; opacity: 0.8; color: #001964; padding: 5px; }
        .icon-btn:hover { opacity: 1; background-color: #f0f4ff; border-radius: 50%; }
        .back-btn { background: transparent; border: none; color: #001964; font-weight: bold; display: flex; align-items: center; padding: 0; margin-bottom: 15px; font-size: 1rem;}
        
        /* 活動清單 */
        .activity-img { width: 100%; height: 160px; object-fit: cover; border-radius: 6px; margin-bottom: 12px; background-color: #eee;}
        .table-custom th { text-align: right; font-weight: normal; font-size: 0.9rem; color: #666; padding: 8px 5px;}
        .table-custom td { text-align: right; font-size: 0.95rem; color: #001964; padding: 8px 5px; }
        .table-custom td:first-child { text-align: left; }
        .total-row { background-color: #e2f0fa; font-weight: bold; border-radius: 4px; }
        .total-row td { padding-top: 10px; padding-bottom: 10px; }
        .action-btns { display: flex; gap: 10px; justify-content: flex-end; margin-top: 15px; }
        .btn-outline { 
            border: 1px solid #001964; color: #001964; background: white; width: 100%; 
            padding: 8px; border-radius: 5px; font-size: 14px;
        }
        .btn-outline:hover { background-color: #f0f4ff; }

        /* 詳細頁與 Modal */
        .hcp-avatar { width: 80px; height: 80px; border-radius: 50%; object-fit: cover; background: #ccc; border: 3px solid white; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        .detail-label { font-weight: bold; color: #001964; font-size: 0.9rem; margin-top: 10px; }
        .detail-value { color: #333; margin-bottom: 5px; font-size: 1rem; }
        
        .history-item { position: relative; padding-left: 20px; padding-bottom: 25px; border-left: 2px solid #d7e6f8; margin-left: 8px; }
        .history-item::before { content: ''; position: absolute; left: -6px; top: 0; width: 10px; height: 10px; border-radius: 50%; background: #3b97de; box-shadow: 0 0 0 3px white; }
        .history-item:last-child { border-left: none; }
        .history-date { font-size: 0.85rem; color: #888; margin-bottom: 4px; display: block;}
        .history-action { font-size: 1rem; color: #001964; font-weight: 500;}

        /* QR Code Modal */
        .modal-content { border-radius: 15px; text-align: center; padding: 15px; border: none; box-shadow: 0 10px 25px rgba(0,0,0,0.2); }
        .qr-logo { height: 40px; margin-bottom: 15px; object-fit: contain; }
        .qr-title { font-size: 1.2rem; color: #333; font-weight: bold; margin-bottom: 5px; }
        .qr-subtitle { font-size: 0.95rem; color: #555; margin-bottom: 15px; padding-bottom: 15px; border-bottom: 1px solid #eee; }
        .qr-warning { color: #d32f2f; font-size: 0.9rem; font-weight: bold; line-height: 1.5; margin-bottom: 15px; }
        .qr-img { width: 180px; height: 180px; margin: 0 auto 20px auto; border: 1px solid #ddd; padding: 5px; border-radius: 10px; }
        .btn-copy { border: 1px solid #001964; color: #001964; background: white; border-radius: 30px; padding: 10px 30px; width: 85%; margin: 0 auto 12px auto; display: block; font-weight: 500; }
        .btn-confirm { background: #001964; color: white; border-radius: 30px; padding: 10px 30px; width: 85%; margin: 0 auto; display: block; border: none; font-weight: 500;}
        .btn-copy:hover { background: #f0f4ff; }
        .btn-confirm:hover { background: #002a80; }
        .btn-copy .material-icons { font-size: 18px; vertical-align: text-bottom; margin-right: 5px; }
        
        .or-text { color: #a3acc8; font-size: 14px; margin: 5px 0; font-family: serif; font-style: italic; }
    </style>
</head>
<body>

<div id="app" class="page-wrapper">

    <!-- Loading Overlay -->
    <div v-if="isLoading" class="loading-overlay">
        <div class="spinner-border spinner-custom" role="status">
            <span class="visually-hidden">Loading...</span>
        </div>
    </div>

    <!-- ================= 1. 主導覽列 ================= -->
    <div class="top-nav" v-if="currentView === 'main'">
        <button class="nav-btn" :class="{ active: currentTab === 'hcp' }" @click="switchTab('hcp')">HCP 清單</button>
        <button class="nav-btn" :class="{ active: currentTab === 'activity' }" @click="switchTab('activity')">活動清單</button>
    </div>

    <div class="content-area">

        <!-- ================= 視圖 1: HCP 清單 ================= -->
        <div v-if="currentView === 'main' && currentTab === 'hcp'">
            
            <!-- 進度條 -->
            <div class="progress-card">
                <div class="d-flex justify-content-between align-items-center">
                    <div>
                        <div style="font-weight: bold; font-size: 1.1rem;">HCP 邀請進度</div>
                        <div style="font-size: 0.85rem; opacity: 0.9;">計算您區域內的客戶</div>
                    </div>
                    <div class="d-flex align-items-center">
                         <span class="material-icons me-1" style="font-size: 18px;">refresh</span>
                         <span style="font-size: 1.8rem; font-weight: bold;">32%</span>
                    </div>
                </div>
                <div class="progress-hr"></div>
                <div class="d-flex justify-content-between" style="font-size: 0.9rem;">
                    <div><span class="material-icons" style="font-size: 16px; vertical-align: middle;">person</span> 總數 <strong>150</strong></div>
                    <div><span class="material-icons" style="font-size: 16px; vertical-align: middle;">check_circle</span> 已邀請 <strong>48</strong></div>
                </div>
            </div>

            <!-- 搜尋 -->
            <div class="search-box">
                <input type="text" class="form-control mb-1" placeholder="搜尋 HCP 姓名" v-model="form.hcpName">
                <div class="text-center or-text">or/and</div>
                <input type="text" class="form-control mt-1" placeholder="搜尋院所" v-model="form.hospital">
                <button class="btn-primary-custom" @click="doSearch" :disabled="isLoading">查詢</button>
            </div>

            <!-- 子分頁 -->
            <div class="sub-tabs mt-4">
                <div class="sub-tab" :class="{ active: hcpSubTab === 'io' }" @click="switchSubTab('io')">Assigned 客戶</div>
                <div class="sub-tab" :class="{ active: hcpSubTab === 'non-io' }" @click="switchSubTab('non-io')">Non-Assigned 客戶</div>
            </div>

            <div v-if="filteredHcpList.length === 0" class="text-center text-muted mt-5">
                {{ hasSearched ? '查無資料' : '請輸入條件後點擊查詢' }}
            </div>

            <!-- 列表 -->
            <div v-for="hcp in filteredHcpList" :key="hcp.id" class="custom-card">
                <div class="card-header-custom">
                    <div class="title-text">{{ hcp.name }}</div>
                    <div>
                        <button class="icon-btn" @click="openQrModal(hcp)" title="QR Code">
                            <span class="material-icons">qr_code</span>
                        </button>
                        <button class="icon-btn" @click="goToHcpDetail(hcp)"><span class="material-icons">info</span></button>
                    </div>
                </div>
                <div class="info-text" v-for="hosp in hcp.hospital">{{ hosp }}</div>
            </div>
        </div>

        <!-- ================= 視圖 2: 活動清單 ================= -->
        <div v-if="currentView === 'main' && currentTab === 'activity'">
            <div class="mb-3">
                <!-- 修正：@change 呼叫 simulateLoading 時不要傳參數，避免事件物件被當作 callback 執行 -->
                <select class="form-control" v-model="activityFilter" @change="simulateLoading()" style="background-image: none;">
                    <option :value="true">待上線/進行中活動</option>
                    <option :value="false">已結束活動</option>
                    <option value="all">全部活動</option>
                </select>
            </div>

            <div v-for="act in filteredActivityList" :key="act.id" class="custom-card">
                <img :src="act.image" class="activity-img" alt="Activity">
                <div class="title-text mb-1">{{ act.title }}</div>
                <div class="sub-info-text">{{ act.dateRange }} <br> {{ act.type }}</div>
                <div style="border-top: 1px solid #eee; margin: 10px 0;"></div>
                
                <table class="table-custom w-100">
                    <thead><tr><th></th><th>報到人數</th><th>報名人數</th></tr></thead>
                    <tbody>
                        <tr><td>HCP人員</td><td>{{ act.hcpCheckIn }} 人</td><td>{{ act.hcpApply }} 人</td></tr>
                        <tr class="total-row"><td>總人數</td><td>{{ act.totalCheckIn }} 人</td><td>{{ act.totalApply }} 人</td></tr>
                    </tbody>
                </table>

                <div class="action-btns">
                    <!-- 修正：@click 呼叫 simulateLoading 時不要傳參數 -->
                    <button class="btn btn-outline" @click="simulateLoading()">重新整理</button>
                    <button class="btn btn-outline" @click="goToActivityRegistration(act)">查看名單</button>
                </div>
            </div>
        </div>

        <!-- ================= 視圖 3: HCP 詳細頁 ================= -->
        <div v-if="currentView === 'hcp-detail' && selectedHcp">
            <button class="back-btn" @click="goBack"><span class="material-icons me-1">arrow_back_ios</span> 返回</button>
            
            <div class="row mb-4 px-2">
                <div class="col-4">
                    <img :src="selectedHcp.avatar || 'https://placehold.co/100'" class="hcp-avatar" alt="Avatar">
                </div>
                <div class="col-8">
                    <div class="detail-label">姓名</div>
                    <div class="detail-value">{{ selectedHcp.name }}</div>
                    <div class="detail-label">電話</div>
                    <div class="detail-value">{{ selectedHcp.phone || '0912-345-678' }}</div>
                </div>
                <div class="col-12 mt-3">
                    <div class="detail-label">Email</div>
                    <div class="detail-value">{{ selectedHcp.email || 'test@example.com' }}</div>
                </div>
                <div class="col-12 mt-3">
                    <div class="detail-label">同意治療領域</div>
                    <div class="detail-value">糖尿病領域, 肥胖症領域</div>
                </div>
            </div>

            <div class="sub-tabs">
                <div class="sub-tab" :class="{ active: detailTab === 'info' }" @click="switchDetailTab('info')">院所資訊</div>
                <div class="sub-tab" :class="{ active: detailTab === 'history' }" @click="switchDetailTab('history')">用戶歷程</div>
            </div>

            <div v-if="detailTab === 'info'">
                <div v-for="hosp in selectedHcp.hospital" class="custom-card">
                    <div class="title-text mb-2">{{ hosp }}</div>
                    <div class="row" style="font-size: 0.95rem; color: #001964;">
                        <div class="col-6 mb-2">台北市, 中正區</div>
                        <div class="col-6 mb-2">醫學中心</div>
                        <div class="col-6">新陳代謝科</div>
                        <div class="col-6">主治醫師</div>
                    </div>
                </div>
            </div>

            <div v-if="detailTab === 'history'">
                <div class="custom-card">
                    <div class="history-item">
                        <span class="history-date">2023-12-01 10:00</span>
                        <span class="history-action">瀏覽文章 「最新糖尿病指引」</span>
                    </div>
                    <div class="history-item">
                        <span class="history-date">2023-11-20 14:30</span>
                        <span class="history-action">活動報名 「年度研討會」</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- ================= 視圖 4: 活動名單頁 ================= -->
        <div v-if="currentView === 'activity-registration' && selectedActivity">
            <button class="back-btn" @click="goBack"><span class="material-icons me-1">arrow_back_ios</span> 返回</button>
            
            <div class="custom-card">
                <div class="title-text">{{ selectedActivity.title }}</div>
                <div class="sub-info-text mb-2">{{ selectedActivity.dateRange }}</div>
                <hr style="border-color: #eee;">
                <table class="table-custom w-100">
                    <thead><tr><th></th><th>報到人數</th><th>報名人數</th></tr></thead>
                    <tbody>
                        <tr><td>HCP人員</td><td>{{ selectedActivity.hcpCheckIn }} 人</td><td>{{ selectedActivity.hcpApply }} 人</td></tr>
                        <tr class="total-row"><td>總人數</td><td>{{ selectedActivity.totalCheckIn }} 人</td><td>{{ selectedActivity.totalApply }} 人</td></tr>
                    </tbody>
                </table>
            </div>

            <div class="custom-card">
                <input type="text" class="form-control mb-3" placeholder="搜尋姓名..." v-model="form.regSearch">
                <!-- 修正：按鈕呼叫 simulateLoading 時不傳參數 -->
                <button class="btn-primary-custom mb-3 w-100" @click="simulateLoading()" style="margin-top: 0;">搜尋</button>
                
                <table class="table table-striped" style="font-size: 0.95rem;">
                    <thead><tr><th>姓名</th><th>身份</th><th>報到</th></tr></thead>
                    <tbody>
                        <tr v-for="user in filteredHcpRegistrations" :key="user.id">
                            <td>{{ user.name }}</td>
                            <td>{{ user.identity }}</td>
                            <td>
                                <span v-if="user.isCheckIn" class="text-success">已報到</span>
                                <span v-else class="text-muted">未報到</span>
                            </td>
                        </tr>
                    </tbody>
                </table>
                <div v-if="filteredHcpRegistrations.length === 0" class="text-center text-muted">無符合資料</div>
            </div>
        </div>
    </div>

    <!-- QR Code Modal -->
    <div class="modal fade" id="qrCodeModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-body">
                    <img src="https://upload.wikimedia.org/wikipedia/en/thumb/8/87/Novo_Nordisk.svg/1200px-Novo_Nordisk.svg.png" class="qr-logo" alt="Logo">
                    <div class="qr-title">醫事人員 邀請 QR code</div>
                    <div class="qr-subtitle">您將邀請 {{ currentQrHcpName }} 掃描加入</div>
                    <div class="qr-warning">
                        請確認為醫事人員本人加入<br>邀請 QR code 請勿外傳
                    </div>
                    <img :src="`https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=https://www.gilead.com/zh-tw/company/gilead-in-taiwan`" class="qr-img" alt="QR Code">
                    <button class="btn-copy" @click="copyLink">
                        <span class="material-icons">content_copy</span> 複製網址
                    </button>
                    <button class="btn-confirm" data-bs-dismiss="modal">確認</button>
                </div>
            </div>
        </div>
    </div>

</div>

<!-- 引入 Vue 3 -->
<script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
<script>
    const { createApp } = Vue;

    createApp({
        data() {
            return {
                isLoading: false,
                currentView: 'main',
                currentTab: 'hcp',
                hcpSubTab: 'io',
                detailTab: 'info',
                
                form: { hcpName: '', hospital: '', regSearch: '' },
                filter: { hcpName: '', hospital: '', regSearch: '' },
                hasSearched: true, 

                activityFilter: true,
                selectedHcp: null,
                selectedActivity: null,
                currentQrHcpName: '',
                qrModalInstance: null,

                hcpData: [
                    { id: '1', name: '王大明', phone: '0910-000-111', email: 'wang@hospital.com', hospital: ['台大醫院'], isSE: true, dataSource: 'IQVIA', LINEUserId: 'u1', avatar: 'https://placehold.co/100/001964/fff?text=WD' },
                    { id: '2', name: '李小美', phone: '0920-222-333', email: 'lee@hospital.com', hospital: ['林口長庚', '台北長庚'], isSE: true, dataSource: 'IQVIA', LINEUserId: 'u2', avatar: 'https://placehold.co/100/001964/fff?text=LS' },
                    { id: '3', name: '張志豪', phone: '0930-444-555', email: 'chang@hospital.com', hospital: ['馬偕醫院'], isSE: false, dataSource: 'MW', LINEUserId: '', avatar: 'https://placehold.co/100/001964/fff?text=CH' },
                    { id: '4', name: '陳醫師', phone: '0940-666-777', email: 'chen@hospital.com', hospital: ['台中榮總'], isSE: false, dataSource: 'NN-Personnel', LINEUserId: '', avatar: 'https://placehold.co/100/001964/fff?text=DRC' },
                ],
                activityData: [
                    { 
                        id: 'a1', title: '2025 糖尿病照護研討會', 
                        dateRange: '1/15 09:00 - 1/15 17:00', type: '研討會・實體', 
                        image: 'https://placehold.co/600x300/eee/31343C?text=Seminar',
                        hcpCheckIn: 20, hcpApply: 50, nnCheckIn: 2, nnApply: 5, totalCheckIn: 22, totalApply: 55, isEnabled: true
                    },
                    { 
                        id: 'a2', title: '肥胖症治療線上論壇', 
                        dateRange: '12/20 14:00 - 12/20 16:00', type: '線上課程・線上', 
                        image: 'https://placehold.co/600x300/eee/31343C?text=Webinar',
                        hcpCheckIn: 100, hcpApply: 120, nnCheckIn: 10, nnApply: 15, totalCheckIn: 110, totalApply: 135, isEnabled: false 
                    }
                ],
                allMockRegistrationList: [
                    { id: 'r1', name: '王大明', identity: 'HCP', isCheckIn: true },
                    { id: 'r2', name: '李小美', identity: 'HCP', isCheckIn: false },
                    { id: 'r3', name: '陳醫師', identity: 'HCP', isCheckIn: true },
                    { id: 'r4', name: '林專員', identity: 'NN', isCheckIn: true },
                    { id: 'r5', name: '黃醫師', identity: 'HCP', isCheckIn: false },
                ]
            }
        },
        mounted() {
            const el = document.getElementById('qrCodeModal');
            this.qrModalInstance = new bootstrap.Modal(el);
            this.simulateLoading(); 
        },
        computed: {
            filteredHcpList() {
                let list = this.hcpData.filter(item => {
                    if (this.hcpSubTab === 'io') return item.dataSource === 'IQVIA';
                    else return item.dataSource !== 'IQVIA';
                });
                if (this.filter.hcpName) list = list.filter(item => item.name.includes(this.filter.hcpName));
                if (this.filter.hospital) list = list.filter(item => item.hospital.some(h => h.includes(this.filter.hospital)));
                return list;
            },
            filteredActivityList() {
                if (this.activityFilter === 'all') return this.activityData;
                return this.activityData.filter(item => item.isEnabled === this.activityFilter);
            },
            filteredHcpRegistrations() {
                let list = this.allMockRegistrationList.filter(user => user.identity === 'HCP');
                if (this.form.regSearch) list = list.filter(user => user.name.includes(this.form.regSearch));
                return list;
            }
        },
        methods: {
            simulateLoading(callback) {
                this.isLoading = true;
                setTimeout(() => {
                    // 修正：增加檢查 callback 是否為函式，避免把事件物件當函式執行
                    if (typeof callback === 'function') {
                        callback();
                    }
                    this.isLoading = false;
                }, 800);
            },
            doSearch() {
                this.simulateLoading(() => {
                    this.filter.hcpName = this.form.hcpName;
                    this.filter.hospital = this.form.hospital;
                    this.hasSearched = true;
                });
            },
            switchTab(tab) {
                if (this.currentTab === tab) return;
                this.simulateLoading(() => { this.currentTab = tab; });
            },
            switchSubTab(tab) {
                if (this.hcpSubTab === tab) return;
                this.simulateLoading(() => { this.hcpSubTab = tab; });
            },
            switchDetailTab(tab) {
                if (this.detailTab === tab) return;
                this.simulateLoading(() => { this.detailTab = tab; });
            },
            openQrModal(hcp) {
                this.currentQrHcpName = hcp.name;
                this.qrModalInstance.show();
            },
            copyLink() {
                alert('已複製連結');
            },
            goToHcpDetail(hcp) {
                this.simulateLoading(() => {
                    this.selectedHcp = hcp;
                    this.detailTab = 'info'; 
                    this.currentView = 'hcp-detail';
                });
            },
            goToActivityRegistration(act) {
                this.simulateLoading(() => {
                    this.selectedActivity = act;
                    this.form.regSearch = '';
                    this.currentView = 'activity-registration';
                });
            },
            goBack() {
                this.simulateLoading(() => {
                    this.selectedHcp = null;
                    this.selectedActivity = null;
                    this.currentView = 'main';
                });
            }
        }
    }).mount('#app');
</script>

</body>
</html>
